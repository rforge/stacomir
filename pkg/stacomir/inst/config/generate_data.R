#################################
# generates messages as generated by RefMesssage()
# the message are in the default langage (english)
# from iav three dc with eels
##################################
source ("F:/workspace/stacomir/pkg/stacomir/inst/config/stacomi_manual_launch.r")
assign("lang","English",envir=envir_stacomi)	
refMsg=new("RefMsg")
createmessage(refMsg,pre_launch_test=TRUE)
msg=get("msg",envir=envir_stacomi)
devtools::use_data(msg,internal=FALSE,overwrite=TRUE)


#################################
# generates dataset for BilanMigrationMult
# from iav three dc with eels
##################################
require(stacomiR)
stacomi(FALSE,FALSE,FALSE)
bM_Arzal=new("BilanMigrationMult")
bM_Arzal=choice_c(bM_Arzal,
dc=c(5,6,12),
taxons=c("Anguilla anguilla"),
stades=c("AGG","AGJ","CIV"),datedebut="2011-01-01",datefin="2011-12-31")
bM_Arzal<-connect(bM_Arzal)
# to avoid warnings at package checks
bM_Arzal@dc@data[,"dis_commentaires"]<-iconv(bM_Arzal@dc@data[,"dis_commentaires"],from="latin1",to="UTF8")
bM_Arzal@dc@data[,"type_df"]<-iconv(bM_Arzal@dc@data[,"type_df"],from="latin1",to="UTF8")
bM_Arzal@dc@data[,"type_dc"]<-iconv(bM_Arzal@dc@data[,"type_dc"],from="latin1",to="UTF8")
bM_Arzal@dc@data[,"dif_localisation"]<-iconv(bM_Arzal@dc@data[,"dif_localisation"],from="latin1",to="UTF8")
bM_Arzal@taxons@data[,"tax_nom_commun"]<-iconv(bM_Arzal@taxons@data[,"tax_nom_commun"],from="latin1",to="UTF8")
bM_Arzal@stades@data[,"std_libelle"]<-iconv(bM_Arzal@stades@data[,"std_libelle"],from="latin1",to="UTF8")
setwd("F:/workspace/stacomir/pkg/stacomir")
devtools::use_data(bM_Arzal,internal=FALSE,overwrite=TRUE)


#################################
# generates dataset for BilanMigration
# from the vertical slot fishway located at the estuary of the Vilaine (Brittany)
# Taxa Liza Ramada (Thinlip grey mullet) in 2015
##################################

stacomi(gr_interface=FALSE,
		login_window=FALSE,
		pre_launch_test=FALSE)	
bM_Arzal=new("BilanMigration")
bM_Arzal=choice_c(bM_Arzal,
		dc=5,
		taxons=c("Liza ramada"),
		stades=c("IND"),
		datedebut="2015-01-01",
		datefin="2015-12-31")
bM_Arzal<-connect(bM_Arzal)
bM_Arzal@dc@data[,"dis_commentaires"]<-iconv(bM_Arzal@dc@data[,"dis_commentaires"],from="latin1",to="UTF8")
bM_Arzal@dc@data[,"type_df"]<-iconv(bM_Arzal@dc@data[,"type_df"],from="latin1",to="UTF8")
bM_Arzal@dc@data[,"type_dc"]<-iconv(bM_Arzal@dc@data[,"type_dc"],from="latin1",to="UTF8")
bM_Arzal@dc@data[,"dif_localisation"]<-iconv(bM_Arzal@dc@data[,"dif_localisation"],from="latin1",to="UTF8")
bM_Arzal@taxons@data[,"tax_nom_commun"]<-iconv(bM_Arzal@taxons@data[,"tax_nom_commun"],from="latin1",to="UTF8")
bM_Arzal@stades@data[,"std_libelle"]<-iconv(bM_Arzal@stades@data[,"std_libelle"],from="latin1",to="UTF8")
setwd("F:/workspace/stacomir/pkg/stacomir")
devtools::use_data(bM_Arzal,internal=FALSE,overwrite=TRUE)